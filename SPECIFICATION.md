# Garmin STRIKER4 照射範囲計算機 仕様書

## 概要
Garmin STRIKER4魚群探知機のエコー照射範囲を計算するアプリケーション。
湖面に浮かべた魚群探知機から湖底への照射範囲を可視化。

## アプリケーション情報
- **タイトル**: Garmin STRIKER4 照射範囲計算機

## 機能仕様

### 入力パラメータ
- **水深**: 魚群探知機から湖底までの距離
  - 範囲: 1m～20m
  - 刻み幅: 0.5m（39段階）
  - 入力方式: 垂直スライダー
  - 操作方法:
    - ドラッグ操作（タッチ/マウス）
    - マウスホイール（PC）
  - デフォルト値: 5m
  - 表示形式: 小数点第1位まで（例: 5.0m）

### 計算パターン
水深の入力に対して、以下2つの照射角度パターンの結果を同時に表示：
- **77kHz（45度）**: 広角照射
- **200kHz（15度）**: 狭角照射

### 出力
各照射角度パターンごとに以下を表示：
- **照射範囲円の直径**: 湖底におけるエコー照射範囲の円の直径（小数点第1位まで）

## 技術仕様

### ファイル構成
- **index.html**: メイン計算機
  - HTML、CSS、JavaScriptをすべて1つのファイルに含める
  - 外部CDNやライブラリは使用しない
  - オフラインで動作可能
- **how-it-works.html**: 照射範囲の仕組み解説ページ
  - 魚群探知機の動作原理を図解とともに説明
  - index.htmlからリンク

### 通信仕様
- **完全オフライン動作**
  - 外部サーバーとの通信を一切行わない
  - 外部APIの呼び出しなし
  - すべての処理をローカルで完結

### 対応デバイス
- **スマートフォンファースト設計**
  - 主な使用環境はスマートフォンを想定
  - タッチ操作に最適化されたUI
  - PCとの両対応は必須ではなく、スマホでの使いやすさを優先

### UI仕様

#### レイアウト構成
- **左右2分割レイアウト**
  - 左側: 計算結果表示（77kHz上段、200kHz下段）
  - 右側: 水深選択スライダー
  - スマホでも横並びを維持
- **ビューポート相対レイアウト**
  - コンテナ高さ: 80vh（画面高さの80%）
  - スライダーと結果カードは画面高さに追従して伸縮
  - flexレイアウトによる柔軟なサイズ調整

#### ガイドリンク
- how-it-works.htmlへのナビゲーションリンク
- リンクらしい控えめなスタイル（透明背景、青のボーダー）
- ホバー時に背景が青に変化
- フォントサイズ: PC 0.75rem、スマホ 0.7rem
- 上部マージン: PC 20px、スマホ 15px

#### 水深選択UI
- **縦スライダー**
  - 上部: 浅い水深（1m）
  - 下部: 深い水深（20m）
  - writing-mode: vertical-lr による縦方向実装（クロスブラウザ対応）
  - 水をイメージした青のグラデーション背景
  - 中央に細い縦線（3px幅、::before疑似要素）
  - サムホイール: PC 48px、スマホ 40px
  - スライダー幅: PC 80px、スマホ 60px
  - スライダー高さ: 可変（min-height: 250px, max-height: 400px）
  - マウスホイール対応（上回し:深く、下回し:浅く）

#### 水深表示
- 「水深」ラベルを左側に配置
- メートル表示を右側に大きく表示（3rem）
- 小数点第1位まで表示（例: 5.0m）
- リアルタイムで更新

#### 結果カード
- **動的背景効果**
  - 水深に応じて背景の明暗が変化
  - 浅い水深（1m）: 明るい（overlay opacity: 0）
  - 深い水深（20m）: 暗い（overlay opacity: 0.4）
  - CSS変数（--overlay-opacity）による制御
  - ::before疑似要素でrgbaオーバーレイ実装
  - フォント色は変化せず、視認性を維持

#### タッチ操作最適化
- touch-action: manipulation でダブルタップズーム無効化
- user-select: none でテキスト選択防止

#### レスポンシブ対応
- スマホ（480px以下）でも左右2分割を維持
- ビューポート高さに対応したレイアウト
- 必要に応じてスクロール可能（overflow-y: auto）

#### 初期表示
- ページ読み込み時に5mが選択され、計算結果も表示される

### 計算式
- 照射範囲円の直径 = 2 × 水深 × tan(照射角度 ÷ 2)
- 角度はラジアンに変換して計算
